<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>NxtTurn • Exam Calendar</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome (for small icons in the colored boxes) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

   <!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<script>
  tailwind.config = {
    darkMode: 'class',
    theme: {
      extend: {
        fontFamily: { sans: ['Inter', 'sans-serif'] },
        colors: {
          brand:{50:'#eef5ff',100:'#e0edff',200:'#cfe0ff',300:'#a8cbff',400:'#7fb0ff',500:'#4f91ff',600:'#2f78f0',700:'#1d5fde',800:'#1a4bb8',900:'#1a4090'},
          ink:{50:'#f8fafc',100:'#f1f5f9',200:'#e2e8f0',300:'#cbd5e1',400:'#94a3b8',500:'#64748b',600:'#475569',700:'#334155',800:'#1e293b',900:'#0f172a'},
          explore: { DEFAULT: '#8B5CF6', light: '#EDE9FE' },
          seekers: { DEFAULT: '#EC4899', light: '#FCE7F3' },
          exams: { DEFAULT: '#10B981', light: '#D1FAE5' },
          network: { DEFAULT: '#F59E0B', light: '#FEF3C7' },
          research: { DEFAULT: '#3B82F6', light: '#DBEAFE' },
          messages: { DEFAULT: '#EF4444', light: '#FEE2E2' },
          notifications: { DEFAULT: '#6366F1', light: '#E0E7FF' }
        },
        boxShadow:{
          soft: '0 6px 20px rgba(2,6,23,.08)',
          'soft-lg': '0 10px 30px rgba(2,6,23,.12)',
          'inner-brand': 'inset 0 2px 4px 0 rgba(79, 145, 255, 0.15)'
        },
        animation: {
          'pulse-soft': 'pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          'bounce-subtle': 'bounce-subtle 1s infinite',
        },
        keyframes: {
          'pulse-soft': { '0%,100%': {opacity:1}, '50%': {opacity: .85} },
          'bounce-subtle': { '0%,100%': {transform:'translateY(0)'}, '50%': {transform:'translateY(-3px)'} }
        }
      }
    }
  }
</script>
  <style>
    *{ box-sizing:border-box }
  body{ font-family:'Inter',sans-serif; font-weight:400 }

  .nt-glass{ background:rgba(255,255,255,.92); backdrop-filter:blur(12px); -webkit-backdrop-filter:blur(12px) }

  /* ===== Icon weight tweaks ===== */
  :root{
    --icon-sm: 22px;
    --icon-lg: 24px;
    --svg-stroke: 2.2;
  }
  .nav-btn{ padding:.5rem; border-radius:10px; transition:all .2s ease }
  .nav-btn:hover{ background:rgba(207,224,255,.3); transform:translateY(-1px) }
  .nav-btn.active{ background:rgba(207,224,255,.4) }
  .nav-btn .icon{ transition:all .2s ease }

  .icon svg, .icon path, .icon circle, .icon line, .icon polyline, .icon rect { stroke-width: var(--svg-stroke) !important; }

  .fa-solid.icon-fa{
    font-size: calc(var(--icon-sm) + 1px);
    text-shadow: 0 .2px 0 currentColor;
  }
  @media (min-width:640px){
    .fa-solid.icon-fa{ font-size: calc(var(--icon-lg) + 1px) }
  }

  .nav-btn:hover .icon, .nav-btn.active .icon{ transform:scale(1.08) }

  .nav-label{
    font-size:11px; line-height:1rem; color:#64748b; white-space:nowrap;
    transition:all .2s ease; font-weight:500; margin-top:2px;
  }
  .nav-btn:hover .nav-label{ color:#0f172a }
  .nav-btn.active .nav-label{ font-weight:600 }

  .nav-btn .icon{
    width:var(--icon-sm); height:var(--icon-sm); display:inline-flex; align-items:center; justify-content:center;
    line-height:1; vertical-align:middle;
  }
  @media (min-width:640px){
    .nav-btn .icon{ width:var(--icon-lg); height:var(--icon-lg) }
  }

  .nt-scroll::-webkit-scrollbar{ width:6px; height:6px }
  .nt-scroll::-webkit-scrollbar-thumb{ background:#cbd5e1; border-radius:999px }
  .nt-scroll:hover::-webkit-scrollbar-thumb{ background:#94a3b8 }
  .no-scrollbar::-webkit-scrollbar{ display:none }
  .no-scrollbar{ -ms-overflow-style:none; scrollbar-width:none }

  .toggle{ width:40px; height:22px; border-radius:9999px; background:#cbd5e1; position:relative; transition:background .2s ease }
  .toggle::after{
    content:''; position:absolute; top:3px; left:3px; width:16px; height:16px; border-radius:9999px; background:#fff;
    transition:transform .2s ease; box-shadow:0 1px 3px rgba(0,0,0,.2)
  }
  input[type="checkbox"].toggle-input:checked + .toggle{ background:#2f78f0 }
  input[type="checkbox"].toggle-input:checked + .toggle::after{ transform:translateX(18px) }

  .dark body{ background:linear-gradient(to bottom,#0b1220,#0b1220); color:#e2e8f0 }
  .dark .nt-glass{ background:rgba(15,23,42,.88); border-bottom-color:rgba(30,41,59,.6) }
  .dark #profileMenu, .dark .menu-panel{ background:#0f172a; border-color:#1e293b }
  .dark .nav-btn .icon{ color:#94a3b8 }
  .dark .nav-btn:hover .nav-label{ color:#e2e8f0 }
  .dark .nav-btn:hover{ background:rgba(30,41,59,.4) }
  .dark .nav-btn.active{ background:rgba(30,41,59,.6) }
  .dark input[type="search"]{ background:rgba(2,6,23,.4)!important; color:#cbd5e1!important; border-color:#334155!important }

  .profile-ico{ font-size:16px; color:#475569; transition:all .2s ease }
  #profileMenu a:hover .profile-ico, #profileMenu button:hover .profile-ico{ color:#2f78f0; transform:translateY(-1px) }
  .dark .profile-ico{ color:#94a3b8 }
  .dark #profileMenu a:hover .profile-ico, .dark #profileMenu button:hover .profile-ico{ color:#93c5fd }

  /* ===== fixed navbar + no horizontal icon scroll ===== */
  :root{ --nav-h:68px }
  html,body{ max-width:100%; overflow-x:hidden }
  body{ padding-top:var(--nav-h) }

  .nav-scroller{ overflow-x:visible!important }
  .nav-scroller>ul{ width:100%!important; max-width:100%!important; flex-wrap:wrap!important }

  header, header.nt-glass, header nav{ overflow:visible!important }

  .menu-panel{
    box-shadow:0 20px 40px rgba(2,6,23,.15);
    border:1px solid #e2e8f0;
    transform-origin:top center;
  }
  .menu-item{
    display:flex; align-items:center; gap:.65rem;
    padding:.75rem 1rem; transition:all .15s ease;
  }
  .menu-item .menu-ico{
    width:18px; min-width:18px; text-align:center; color:#64748b;
  }
  .menu-item:hover{ background:#f5f8ff }
  .menu-item:hover .menu-ico{ color:#2f78f0 }

  /* Profile dropdown */
  #profileMenu{
    box-shadow:0 20px 40px rgba(2,6,23,.15);
    border:1px solid #e2e8f0;
    transform-origin:top right;
  }

  .search-container{ position:relative; transition:all .3s ease }
  .search-container:focus-within{ transform:translateY(-1px) }

  .notification-badge{
    position:absolute; top:4px; right:4px; min-width:18px; height:18px; padding:0 4px;
    background:#EF4444; color:#fff; border-radius:9px; font-size:11px; font-weight:700;
    display:flex; align-items:center; justify-content:center; border:2px solid #fff; animation:pulse-soft 2s infinite;
  }
  .dark .notification-badge{ border-color:#0f172a }

  .icon-explore{ color:#8B5CF6 }
  .icon-seekers{ color:#EC4899 }
  .icon-network{ color:#F59E0B }
  .icon-messages{ color:#3dcb38 }
  .icon-notifications{ color:#6366F1 }

  .nav-btn:hover .icon-explore{ color:#7C3AED }
  .nav-btn:hover .icon-seekers{ color:#DB2777 }
  .nav-btn:hover .icon-network{ color:#D97706 }
  .nav-btn:hover .icon-messages{ color:#48ee42  }
  .nav-btn:hover .icon-notifications{ color:#4F46E5 }

  .nav-label-explore,
  .nav-label-seekers,
  .nav-label-network,
  .nav-label-messages,
  .nav-label-notifications{ color:black }

  .nav-btn:hover .nav-label-explore{ color:#7C3AED }
  .nav-btn:hover .nav-label-seekers{ color:#DB2777 }
  .nav-btn:hover .nav-label-network{ color:#D97706 }
  .nav-btn:hover .nav-label-messages{ color:#39ca34 }
  .nav-btn:hover .nav-label-notifications{ color:#4F46E5 }

  .nav-btn.active .nav-label-explore{ color:#7C3AED }
  .nav-btn.active .nav-label-seekers{ color:#DB2777 }
  .nav-btn.active .nav-label-network{ color:#D97706 }
  .nav-btn.active .nav-label-messages{ color:#39ca34  }
  .nav-btn.active .nav-label-notifications{ color:#4F46E5 }


  /* main page */
    :root{ --header-h: 0rem; } /* no navbar */
    html, body { height: 100%; }
    body { overflow: hidden; } /* page doesn't scroll, columns do */
    .columns-viewport { height: calc(100vh - var(--header-h)); }

    /* Hide scrollbars but keep scrolling */
    .no-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
    .no-scrollbar::-webkit-scrollbar { width: 0; height: 0; }

    .chip { display:inline-flex; align-items:center; gap:.5rem; border-radius:9999px; border:1px solid rgb(226 232 240); padding:.375rem .75rem; font-size:.875rem; }
    .badge{ display:inline-flex; align-items:center; border-radius:9999px; padding:.125rem .5rem; font-weight:500; font-size:.6875rem; }
  </style>
</head>
<body class="bg-ink-50 text-ink-900 font-sans">


    <header class="fixed top-0 z-50 w-full nt-glass border-b border-slate-200/70">
  <!-- container pushed in -->
  <nav class="mx-auto w-full max-w-7xl px-6 lg:px-12">

    <div class="flex items-center gap-3 py-2.5">
      <!-- BRAND -->
      <a class="select-none inline-flex items-center" href="Homepage.html">
        <img src="assets/logo.jpg" alt="NxtTurn" class="h-4 sm:h-5 w-auto object-contain" />
      </a>
      <!-- Search -->
      <div class="search-container relative ml-3 hidden md:block">
        <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2">
          <svg class="h-4 w-4 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <circle cx="11" cy="11" r="7"></circle><path d="M21 21l-4.35-4.35"></path>
          </svg>
        </span>
        <input class="w-[340px] rounded-full border border-slate-200 bg-white/80 px-9 py-2.5 text-sm text-ink-600 shadow-soft outline-none transition-all duration-300 focus:border-brand-400 focus:bg-white focus:ring-4 focus:ring-brand-500/15 placeholder:text-slate-400" placeholder="Search..." type="search"/>
      </div>

      <div class="flex-1"></div>

      <!-- ICON STRIP -->
      <div class="nav-scroller w-full md:w-auto overflow-x-auto md:overflow-visible no-scrollbar">
        <ul class="flex flex-nowrap items-end gap-0.5 sm:gap-1 md:gap-1.5 w-max pr-1">
          <!-- EXPLORE -->
          <li class="relative group before:content-[''] before:absolute before:left-0 before:right-0 before:top-full before:h-3" data-menu="explore">
            <a href="#" class="nav-btn min-w-[56px] sm:min-w-[64px] md:min-w-[70px] group relative flex flex-col items-center justify-center gap-0 focus:outline-none" aria-label="Explore" aria-haspopup="true" aria-expanded="false">
              <i class="icon fa-solid fa-compass icon-explore icon-fa" aria-hidden="true"></i>
              <span class="nav-label nav-label-explore">Explore</span>
            </a>

            <div class="menu-panel nt-scroll absolute left-1/2 z-40 mt-3 w-72 -translate-x-1/2 overflow-hidden rounded-xl bg-white shadow-soft-lg opacity-0 invisible translate-y-1 will-change-transform transition-all duration-200 md:group-hover:opacity-100 md:group-hover:visible md:group-hover:translate-y-0">
              <ul class="divide-y divide-slate-100 text-sm">
                <li>
                  <a class="menu-item hover:bg-brand-50/70" href="school.html">
                    <i class="menu-ico fa-solid fa-school"></i>
                    <span>Schools</span>
                  </a>
                </li>
                <li>
                  <a class="menu-item hover:bg-brand-50/70" href="institute.html">
                    <i class="menu-ico fa-solid fa-building-columns"></i>
                    <span>Institutes</span>
                  </a>
                </li>
                <li>
                  <a class="menu-item hover:bg-brand-50/70" href="enterprises.html">
                    <i class="menu-ico fa-solid fa-briefcase"></i>
                    <span>Enterprises</span>
                  </a>
                </li>
                <li>
                  <a class="menu-item hover:bg-brand-50/70" href="government.html">
                    <i class="menu-ico fa-solid fa-landmark"></i>
                    <span>Government Enterprises</span>
                  </a>
                </li>
                <li>
                  <a class="menu-item hover:bg-brand-50/70" href="#">
                    <i class="menu-ico fa-solid fa-pen-to-square"></i>
                    <span>Exams</span>
                  </a>
                </li>
                <li class="pl-10 pr-4 py-2 flex gap-2">
                  <a class="text-[13px] px-2 py-1 rounded hover:bg-exams-light text-exams" href="mocktest.html">
                    <i class="fa-solid fa-clipboard-check mr-1"></i> Mock Test
                  </a>
                  <a class="text-[13px] px-2 py-1 rounded hover:bg-exams-light text-exams" href="examcalendar.html">
                    <i class="fa-solid fa-calendar-days mr-1"></i> Calendar
                  </a>
                </li>
                <li>
                  <a class="menu-item hover:bg-brand-50/70" href="research.html">
                    <i class="menu-ico fa-solid fa-flask"></i>
                    <span>Research</span>
                  </a>
                </li>
              </ul>
            </div>
          </li>

          <!-- SEEKERS -->
          <li class="relative group before:content-[''] before:absolute before:left-0 before:right-0 before:top-full before:h-3" data-menu="seekers">
            <a href="#" class="nav-btn min-w-[56px] sm:min-w-[64px] md:min-w-[70px] group relative flex flex-col items-center justify-center gap-0 focus:outline-none" aria-label="Seekers" aria-haspopup="true" aria-expanded="false">
              <span class="icon icon-seekers" aria-hidden="true">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
              </span>
              <span class="nav-label nav-label-seekers">Seekers</span>
            </a>
            <div class="menu-panel nt-scroll absolute left-1/2 z-40 mt-3 w-72 -translate-x-1/2 overflow-hidden rounded-xl bg-white shadow-soft-lg opacity-0 invisible translate-y-1 will-change-transform transition-all duration-200 md:group-hover:opacity-100 md:group-hover:visible md:group-hover:translate-y-0">
              <ul class="divide-y divide-slate-100 text-sm">
                <li><a class="menu-item" href="internship.html"><i class="menu-ico fa-solid fa-user-graduate"></i><span>Internship</span></a></li>
                <li><a class="menu-item" href="apprenticeship.html"><i class="menu-ico fa-solid fa-helmet-safety"></i><span>Apprenticeship</span></a></li>
                <li><a class="menu-item" href="jobs.html"><i class="menu-ico fa-solid fa-briefcase"></i><span>Job</span></a></li>
                <li><a class="menu-item" href="government-openings.html"><i class="menu-ico fa-solid fa-building-flag"></i><span>Government Openings</span></a></li>
                <li><a class="menu-item" href="international-government-openings.html"><i class="menu-ico fa-solid fa-earth-asia"></i><span>International Govt. Openings</span></a></li>
                <li><a class="menu-item" href="freelances.html"><i class="menu-ico fa-solid fa-laptop-code"></i><span>Freelances</span></a></li>
              </ul>
            </div>
          </li>

          <!-- MY NETWORK -->
          <li>
            <a href="mynetwork.html" class="nav-btn min-w-[56px] sm:min-w-[64px] md:min-w-[70px] group relative flex flex-col items-center justify-center gap-0 focus:outline-none" aria-label="My Network">
              <span class="icon icon-network" aria-hidden="true">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
              </svg>
              </span>
              <span class="nav-label nav-label-network">Network</span>
            </a>
          </li>

          <!-- MESSAGING -->
          <li class="relative">
            <a href="messages.html" class="nav-btn min-w-[56px] sm:min-w-[64px] md:min-w-[70px] group relative flex flex-col items-center justify-center gap-0 focus:outline-none" aria-label="Messaging">
              <span class="icon icon-messages" aria-hidden="true">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                </svg>
              </span>
              <span class="nav-label nav-label-messages">Messages</span>
              <span class="notification-badge">3</span>
            </a>
          </li>

          <!-- NOTIFICATIONS -->
          <li class="relative">
            <a href="notification.html" class="nav-btn min-w-[56px] sm:min-w-[64px] md:min-w-[70px] group relative flex flex-col items-center justify-center gap-0 focus:outline-none" aria-label="Notifications">
              <span class="icon icon-notifications" aria-hidden="true">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                </svg>
              </span>
              <span class="nav-label nav-label-notifications">Alerts</span>
              <span class="notification-badge">12</span>
            </a>
          </li>

          <li class="mx-1 hidden h-6 w-px bg-slate-200 md:block"></li>

          <!-- PROFILE (nudged up) -->
          <li class="relative">
            <button id="profileBtn"
              class="flex items-center gap-2 rounded-xl px-2.5 py-1.5 text-sm font-medium text-ink-700
                     hover:bg-white hover:shadow-soft hover:ring-1 hover:ring-slate-200
                     focus:outline-none transition-all duration-200
                     -translate-y-0.5 sm:-translate-y-1">
              <div class="relative -mt-0.5 sm:-mt-1">
                <img src="https://i.pravatar.cc/40?img=5" class="h-8 w-8 rounded-full object-cover ring-2 ring-white" alt="Profile"/>
                <span class="absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full bg-green-500 ring-2 ring-white"></span>
              </div>
              <span class="hidden sm:inline">Profile</span>
              <svg id="profileChevron" class="h-4 w-4 text-slate-600 transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>

            <div id="profileMenu" class="invisible absolute right-0 mt-2 w-72 origin-top-right rounded-xl bg-white shadow-soft-lg border border-slate-100 opacity-0 transition-all duration-200 scale-95">
              
              <div class="p-4 border-b border-slate-100">
              <a href="profile.html" target="_self"
                class="block p-4 border-b border-slate-100 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-brand-500 rounded-t-xl"
                id="profileHeaderLink">
                <div class="flex items-center gap-3">
                <img src="https://i.pravatar.cc/40?img=5" class="h-10 w-10 rounded-full object-cover" alt="Profile"/>
              <div>
                <p class="font-medium text-ink-900">Alex Morgan</p>
                <p class="text-xs text-slate-500">Premium Member</p>
              </div>
              </div>
                </a>
              </div>
              
              <ul class="py-2 text-sm" role="menu" aria-label="Profile menu">
                <li><a class="menu-item" role="menuitem" href="settings.html"><i class="menu-ico fa-solid fa-user-gear"></i><span>Settings &amp; Privacy</span></a></li>
                <li><a class="menu-item" role="menuitem" href="help.html"><i class="menu-ico fa-solid fa-circle-question"></i><span>Help &amp; Support</span></a></li>
                <li><a class="menu-item" role="menuitem" href="display.html"><i class="menu-ico fa-solid fa-display"></i><span>Display &amp; Accessibility</span></a></li>
                <li><a class="menu-item" role="menuitem" href="feedback.html"><i class="menu-ico fa-solid fa-comment-dots"></i><span>Give Feedback</span></a></li>
                <li><a class="menu-item" role="menuitem" href="games.html"><i class="menu-ico fa-solid fa-gamepad"></i><span>Games</span></a></li>
                <li class="px-4">
                  <button id="themeRow" type="button" class="w-full flex items-center justify-between py-2.5" role="menuitem" aria-pressed="false">
                    <span class="flex items-center gap-3">
                      <i class="menu-ico fa-solid fa-moon"></i><span>Dark Mode</span>
                    </span>
                    <span class="flex items-center gap-2">
                      <input id="themeToggle" class="toggle-input sr-only" type="checkbox" aria-label="Toggle dark mode"/>
                      <span class="toggle" aria-hidden="true"></span>
                    </span>
                  </button>
                </li>
                <li class="border-t border-slate-100 mt-2"> 
                  <a class="menu-item text-rose-600 hover:bg-rose-50/70" role="menuitem" href="login.html">
                    <i class="menu-ico fa-solid fa-arrow-right-from-bracket"></i><span>Log Out</span>
                  </a>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>


  <!-- 3-column grid (navbar removed) -->
  <main class="max-w-[120rem] mx-auto px-4">
    <div class="grid grid-cols-12 gap-4 columns-viewport pt-4">

      <!-- LEFT (filters only — with darker thin dividers) -->
      <aside class="col-span-12 md:col-span-3 h-full overflow-y-auto no-scrollbar">
        <section class="bg-white border border-ink-200 rounded-2xl shadow-soft p-4">
          <div class="flex items-center justify-between">
            <h2 class="text-base font-semibold">Filters</h2>
            <button id="clearFilters" class="text-sm text-brand-700 hover:underline">Clear all</button>
          </div>

          <!-- Search -->
          <div class="mt-4 pt-4 border-t border-ink-200">
            <label class="text-sm font-medium">Search exam</label>
            <input id="q" type="text" placeholder="e.g. JEE, GATE, UPSC"
                   class="mt-2 w-full rounded-xl border border-ink-200 bg-ink-50/50 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brand-400"/>
          </div>

          <!-- Exam Level -->
          <div class="mt-6 pt-4 border-t border-ink-200">
            <p class="text-sm font-medium mb-2">Exam Level</p>
            <div class="space-y-2 text-sm">
              <label class="flex items-center gap-2"><input class="level" type="checkbox" value="National"> National</label>
              <label class="flex items-center gap-2"><input class="level" type="checkbox" value="State"> State</label>
              <label class="flex items-center gap-2"><input class="level" type="checkbox" value="University"> University</label>
            </div>
          </div>

          <!-- Category -->
          <div class="mt-6 pt-4 border-t border-ink-200">
            <p class="text-sm font-medium mb-2">Category</p>
            <div class="grid grid-cols-2 gap-2 text-sm">
              <label class="flex items-center gap-2"><input class="cat" type="checkbox" value="Engineering"> Engineering</label>
              <label class="flex items-center gap-2"><input class="cat" type="checkbox" value="Medical"> Medical</label>
              <label class="flex items-center gap-2"><input class="cat" type="checkbox" value="Management"> Management</label>
              <label class="flex items-center gap-2"><input class="cat" type="checkbox" value="Government"> Government</label>
              <label class="flex items-center gap-2"><input class="cat" type="checkbox" value="Law"> Law</label>
              <label class="flex items-center gap-2"><input class="cat" type="checkbox" value="Science"> Science</label>
            </div>
          </div>

          <!-- Mode -->
          <div class="mt-6 pt-4 border-t border-ink-200">
            <p class="text-sm font-medium mb-2">Mode</p>
            <div class="space-y-2 text-sm">
              <label class="flex items-center gap-2"><input class="mode" type="checkbox" value="Online"> Online</label>
              <label class="flex items-center gap-2"><input class="mode" type="checkbox" value="Offline"> Offline</label>
              <label class="flex items-center gap-2"><input class="mode" type="checkbox" value="Hybrid"> Hybrid</label>
            </div>
          </div>

          <!-- State -->
          <div class="mt-6 pt-4 border-t border-ink-200">
            <p class="text-sm font-medium mb-2">State (if State-level)</p>
            <select id="state" class="w-full rounded-xl border border-ink-200 bg-ink-50/50 px-3 py-2">
              <option value="">Any</option>
              <option>Maharashtra</option>
              <option>Madhya Pradesh</option>
              <option>Karnataka</option>
              <option>Tamil Nadu</option>
              <option>Delhi</option>
            </select>
          </div>

          <!-- Application Status -->
          <div class="mt-6 pt-4 border-t border-ink-200">
            <p class="text-sm font-medium mb-2">Application Status</p>
            <div class="space-y-2 text-sm">
              <label class="flex items-center gap-2"><input class="status" type="checkbox" value="Open"> Open</label>
              <label class="flex items-center gap-2"><input class="status" type="checkbox" value="Upcoming"> Upcoming</label>
              <label class="flex items-center gap-2"><input class="status" type="checkbox" value="Closed"> Closed</label>
            </div>
          </div>

          <!-- Max Fee -->
          <div class="mt-6 pt-4 border-t border-ink-200">
            <p class="text-sm font-medium mb-2">Max Exam Fee (₹)</p>
            <input id="feeMax" type="number" min="0" step="50" placeholder="e.g. 2500"
                   class="w-full rounded-xl border border-ink-200 bg-ink-50/50 px-3 py-2">
          </div>

          <!-- Date Range -->
          <div class="mt-6 pt-4 border-t border-ink-200">
            <p class="text-sm font-medium mb-2">Exam Date Range</p>
            <div class="grid grid-cols-2 gap-2">
              <input id="dateFrom" type="date" class="rounded-xl border border-ink-200 bg-ink-50/50 px-3 py-2">
              <input id="dateTo" type="date" class="rounded-xl border border-ink-200 bg-ink-50/50 px-3 py-2">
            </div>
          </div>

          <!-- Sort -->
          <div class="mt-6 pt-4 border-t border-ink-200">
            <p class="text-sm font-medium mb-2">Sort by</p>
            <select id="sortBy" class="w-full rounded-xl border border-ink-200 bg-ink-50/50 px-3 py-2">
              <option value="dateAsc">Exam Date ↑</option>
              <option value="dateDesc">Exam Date ↓</option>
              <option value="feeAsc">Fee ↑</option>
              <option value="feeDesc">Fee ↓</option>
            </select>
          </div>

          <!-- Apply/Reset -->
          <div class="mt-6 flex gap-2">
            <button id="applyFilters" class="flex-1 rounded-xl bg-brand-600 text-white px-4 py-2 font-medium hover:bg-brand-700">Apply</button>
            <button id="resetFilters" class="rounded-xl border border-ink-200 px-4 py-2 hover:bg-ink-100">Reset</button>
          </div>
        </section>

        <div class="mt-4 bg-gradient-to-br from-brand-50 to-white border border-brand-200 rounded-2xl p-4 mb-4">
          <h3 class="font-semibold">Tips</h3>
          <ul class="mt-2 text-sm space-y-1 text-ink-600 list-disc pl-5">
            <li>Use date range for a specific semester.</li>
            <li>“Save” exams to track deadlines.</li>
            <li>Export an .ics to your calendar.</li>
          </ul>
        </div>
      </aside>

      <!-- MIDDLE (results; continuous, no pagination) -->
      <section class="col-span-12 md:col-span-6 h-full overflow-y-auto no-scrollbar">
        <div class="bg-white border border-ink-200 rounded-2xl shadow-soft p-3 md:p-4 sticky top-0">
          <div class="flex flex-wrap items-center gap-2">
            <div class="chip bg-ink-50/50"><span class="text-ink-500">Showing:</span> <span id="resultsCount" class="font-medium">0</span> exams</div>
            <div class="ml-auto flex items-center gap-2">
              <button id="viewList" class="chip hover:bg-ink-100">List</button>
              <button id="viewCards" class="chip hover:bg-ink-100">Cards</button>
              <div class="chip text-brand-800 border-brand-200 bg-brand-50">
                Month:
                <select id="monthFilter" class="bg-transparent outline-none">
                  <option value="">All</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div id="listView" class="mt-4 space-y-4"></div>
        <div id="cardView" class="mt-4 grid md:grid-cols-2 gap-4 hidden"></div>
        <div class="h-6"></div>
      </section>

      <!-- RIGHT (photos/ads allowed) -->
      <aside class="col-span-12 md:col-span-3 h-full overflow-y-auto no-scrollbar">
        <!-- Visual -->
        <section class="bg-white border border-ink-200 rounded-2xl shadow-soft overflow-hidden">
          <img
            src="https://images.unsplash.com/photo-1512295767273-ac109ac3acfa?q=80&w=1200&auto=format&fit=crop"
            alt="Calendar planning"
            class="w-full h-28 object-cover">
          <div class="p-4">
            <h3 class="font-semibold">Stay ahead of deadlines</h3>
            <p class="text-xs text-ink-600 mt-1">Sync important exam dates to your calendar.</p>
          </div>
        </section>

        <section class="mt-4 bg-white border border-ink-200 rounded-2xl shadow-soft p-4">
          <div class="flex items-center justify-between">
            <h2 class="text-base font-semibold">Upcoming Exams</h2>
            <a href="#" class="text-sm text-brand-700 hover:underline">View all</a>
          </div>
          <div id="upcomingList" class="mt-3 space-y-3"></div>
        </section>

        <!-- Sponsored ads (right side only) -->
        <section class="mt-4 bg-white border border-ink-200 rounded-2xl shadow-soft p-4">
          <div class="flex items-center justify-between">
            <h2 class="text-base font-semibold">Sponsored</h2>
            <span class="text-[11px] text-ink-500">Ad</span>
          </div>
          <div class="mt-3 space-y-3">
            <a href="#" class="block rounded-xl border border-ink-200 overflow-hidden hover:shadow-lift">
              <div class="bg-gradient-to-br from-brand-600 to-brand-800 h-20"></div>
              <div class="p-3">
                <p class="text-sm font-semibold">PrepX Pro – Full Mock Tests</p>
                <p class="text-xs text-ink-600 mt-1">Adaptive mocks for JEE, NEET, GATE</p>
              </div>
            </a>
            <a href="#" class="block rounded-xl border border-ink-200 overflow-hidden hover:shadow-lift">
              <div class="bg-gradient-to-br from-ink-400 to-ink-600 h-20"></div>
              <div class="p-3">
                <p class="text-sm font-semibold">Scholarship Drive ’25</p>
                <p class="text-xs text-ink-600 mt-1">Up to 100% fee waivers</p>
              </div>
            </a>
          </div>
        </section>

        <section class="mt-4 bg-gradient-to-br from-brand-50 to-white border border-brand-200 rounded-2xl p-4 mb-4">
          <h3 class="font-semibold">Export deadlines</h3>
          <p class="text-sm text-ink-600 mt-1">Click “Add to Calendar” on an exam to download an .ics file.</p>
        </section>
      </aside>
    </div>
  </main>

  <!-- Templates (NO BORDERS on the 3 info boxes) -->
  <template id="tplRow">
    <div class="bg-white border border-ink-200 rounded-2xl p-4 hover:shadow-lift transition">
      <div class="flex items-start gap-3">
        <div class="w-10 h-10 rounded-xl bg-brand-600 text-white grid place-content-center font-semibold shrink-0">EX</div>
        <div class="flex-1 min-w-0">
          <div class="flex flex-wrap items-center gap-x-3 gap-y-2">
            <h3 class="font-semibold text-base truncate"></h3>
            <span class="badge bg-ink-100 text-ink-700"></span>
            <span class="badge bg-brand-100 text-brand-800"></span>
          </div>
          <p class="text-sm text-ink-600 mt-1"></p>

          <!-- Colored summary boxes WITHOUT borders -->
          <div class="mt-3 grid sm:grid-cols-3 gap-2 text-sm">
            <!-- Application = Blue -->
            <div class="rounded-xl bg-blue-50 p-2">
              <div class="text-blue-700 text-xs flex items-center gap-2">
                <i class="fa-regular fa-calendar-plus"></i>
                <span>Application</span>
              </div>
              <div class="font-medium text-blue-700"></div>
            </div>
            <!-- Exam Date = Amber -->
            <div class="rounded-xl bg-amber-50 p-2">
              <div class="text-amber-700 text-xs flex items-center gap-2">
                <i class="fa-regular fa-calendar-check"></i>
                <span>Exam Date</span>
              </div>
              <div class="font-medium text-amber-700"></div>
            </div>
            <!-- Fee = Green -->
            <div class="rounded-xl bg-green-50 p-2">
              <div class="text-green-700 text-xs flex items-center gap-2">
                <i class="fa-solid fa-indian-rupee-sign"></i>
                <span>Fee</span>
              </div>
              <div class="font-medium text-green-700"></div>
            </div>
          </div>

          <div class="mt-3 flex flex-wrap items-center gap-2 text-xs"></div>
        </div>
        <div class="flex flex-col items-end gap-2">
          <button class="saveBtn chip hover:bg-ink-100">⭐ Save</button>
          <button class="icsBtn chip text-brand-800 border-brand-200 bg-brand-50">Add to Calendar</button>
        </div>
      </div>
    </div>
  </template>

  <template id="tplCard">
    <div class="bg-white border border-ink-200 rounded-2xl p-4 hover:shadow-lift transition">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-xl bg-brand-600 text-white grid place-content-center font-semibold">EX</div>
        <div class="min-w-0">
          <h3 class="font-semibold text-base truncate"></h3>
          <p class="text-xs text-ink-600"></p>
        </div>
        <div class="ml-auto flex items-center gap-2">
          <span class="badge bg-ink-100 text-ink-700"></span>
          <span class="badge bg-brand-100 text-brand-800"></span>
        </div>
      </div>

      <!-- Colored summary boxes WITHOUT borders -->
      <div class="mt-3 grid grid-cols-3 gap-2 text-sm">
        <div class="rounded-xl bg-blue-50 p-2">
          <div class="text-blue-700 text-xs flex items-center gap-2">
            <i class="fa-regular fa-calendar-plus"></i>
            <span>Application</span>
          </div>
          <div class="font-medium text-blue-700"></div>
        </div>
        <div class="rounded-xl bg-amber-50 p-2">
          <div class="text-amber-700 text-xs flex items-center gap-2">
            <i class="fa-regular fa-calendar-check"></i>
            <span>Exam Date</span>
          </div>
          <div class="font-medium text-amber-700"></div>
        </div>
        <div class="rounded-xl bg-green-50 p-2">
          <div class="text-green-700 text-xs flex items-center gap-2">
            <i class="fa-solid fa-indian-rupee-sign"></i>
            <span>Fee</span>
          </div>
          <div class="font-medium text-green-700"></div>
        </div>
      </div>

      <div class="mt-3 flex flex-wrap gap-2 text-xs"></div>
      <div class="mt-4 flex items-center justify-between">
        <button class="saveBtn chip hover:bg-ink-100">⭐ Save</button>
        <button class="icsBtn chip text-brand-800 border-brand-200 bg-brand-50">Add to Calendar</button>
      </div>
    </div>
  </template>

  <template id="tplUpcoming">
    <div class="rounded-xl border border-ink-200 p-3 hover:bg-ink-50/70">
      <div class="flex items-start gap-3">
        <div class="w-9 h-9 rounded-lg bg-brand-600 text-white grid place-content-center text-sm font-semibold">D</div>
        <div class="min-w-0">
          <div class="flex items-center gap-2">
            <p class="font-medium text-sm truncate"></p>
            <span class="badge bg-ink-100 text-ink-700"></span>
          </div>
          <p class="text-xs text-ink-600 mt-0.5"></p>
        </div>
      </div>
    </div>
  </template>

  <script>

    function showPanel(li){
    const p=li.querySelector('.menu-panel'); if(!p) return;
    p.classList.remove('invisible','opacity-0','translate-y-1');
    p.classList.add('visible','opacity-100','translate-y-0');
    li.classList.add('open');
    const btn=li.querySelector('.nav-btn'); btn?.setAttribute('aria-expanded','true');
  }
  function hidePanel(li){
    const p=li.querySelector('.menu-panel'); if(!p) return;
    p.classList.remove('visible','opacity-100','translate-y-0');
    p.classList.add('invisible','opacity-0','translate-y-1');
    li.classList.remove('open');
    const btn=li.querySelector('.nav-btn'); btn?.setAttribute('aria-expanded','false');
  }
  function togglePanel(li){
    if(li.classList.contains('open')){ hidePanel(li) }
    else{
      document.querySelectorAll('li[data-menu].open').forEach(o=>{ if(o!==li) hidePanel(o) });
      showPanel(li);
    }
  }

  function toggleProfileMenu(){
    const menu=document.getElementById('profileMenu');
    const chevron=document.getElementById('profileChevron');
    const isExpanded=menu.classList.contains('visible');
    if(isExpanded){
      menu.classList.remove('visible','opacity-100','scale-100');
      menu.classList.add('invisible','opacity-0','scale-95');
      chevron.classList.remove('rotate-180');
    }else{
      menu.classList.remove('invisible','opacity-0','scale-95');
      menu.classList.add('visible','opacity-100','scale-100');
      chevron.classList.add('rotate-180');
    }
    document.getElementById('profileBtn').setAttribute('aria-expanded', !isExpanded);
  }

  function setupThemeToggle(){
    const toggle=document.getElementById('themeToggle');
    const themeRow=document.getElementById('themeRow');
    const prefersDark=window.matchMedia('(prefers-color-scheme: dark)').matches;
    const storedTheme=localStorage.getItem('theme');
    if(storedTheme==='dark'||(!storedTheme&&prefersDark)){
      document.documentElement.classList.add('dark'); toggle.checked=true;
    }else{
      document.documentElement.classList.remove('dark'); toggle.checked=false;
    }
    toggle.addEventListener('change',function(){
      if(this.checked){ document.documentElement.classList.add('dark'); localStorage.setItem('theme','dark'); }
      else{ document.documentElement.classList.remove('dark'); localStorage.setItem('theme','light'); }
    });
    themeRow.addEventListener('click',function(e){ if(e.target!==toggle){ toggle.click() }});
  }

  function setupClickOutside(){
    document.addEventListener('click',function(e){
      document.querySelectorAll('li[data-menu].open').forEach(li=>{ if(!li.contains(e.target)) hidePanel(li) });
      const profileMenu=document.getElementById('profileMenu');
      const profileBtn=document.getElementById('profileBtn');
      if(profileMenu.classList.contains('visible') && !profileMenu.contains(e.target) && !profileBtn.contains(e.target)){ toggleProfileMenu() }
    });
  }

  function setupMobileBehavior(){
    const menuItems=document.querySelectorAll('li[data-menu]');
    menuItems.forEach(li=>{
      const link=li.querySelector('a');
      link.addEventListener('click',function(e){
        if(window.innerWidth<768){ e.preventDefault(); togglePanel(li) }
      });
    });
  }

  document.addEventListener('DOMContentLoaded',function(){
    setupThemeToggle();
    setupClickOutside();
    setupMobileBehavior();
    document.getElementById('profileBtn').addEventListener('click',function(e){ e.stopPropagation(); toggleProfileMenu() });
    document.getElementById('profileChevron').classList.add('transition-transform','duration-200');
    document.addEventListener('keydown',function(e){
      if(e.key==='Escape'){
        const profileMenu=document.getElementById('profileMenu');
        if(profileMenu.classList.contains('visible')) toggleProfileMenu();
      }
    });
  });


  
    // ---------- SAMPLE DATA ----------
    const exams = [
      {id:'JEE-MAIN-2026', name:'JEE Main', org:'NTA', level:'National', category:'Engineering', mode:'Online', state:'', fee:1000, appStart:'2025-11-15', appEnd:'2025-12-15', examDate:'2026-01-24', status:'Upcoming', tags:['B.E/B.Tech','PCM','Multiple Sessions']},
      {id:'NEET-UG-2026', name:'NEET UG', org:'NTA', level:'National', category:'Medical', mode:'Offline', state:'', fee:1700, appStart:'2025-12-20', appEnd:'2026-01-20', examDate:'2026-05-03', status:'Upcoming', tags:['MBBS','BDS','Pen & Paper']},
      {id:'GATE-2026', name:'GATE', org:'IISc/IITs', level:'National', category:'Engineering', mode:'Online', state:'', fee:1800, appStart:'2025-08-30', appEnd:'2025-10-05', examDate:'2026-02-08', status:'Upcoming', tags:['M.Tech','Multiple Papers']},
      {id:'CAT-2025', name:'CAT', org:'IIMs', level:'National', category:'Management', mode:'Online', state:'', fee:2500, appStart:'2025-08-01', appEnd:'2025-09-20', examDate:'2025-11-30', status:'Open', tags:['MBA','Three Slots']},
      {id:'MH-CET-2026', name:'MHT CET', org:'CET Cell', level:'State', category:'Engineering', mode:'Online', state:'Maharashtra', fee:1000, appStart:'2026-01-05', appEnd:'2026-02-05', examDate:'2026-04-18', status:'Upcoming', tags:['PCM/PCB','State Quota']},
      {id:'CLAT-2026', name:'CLAT', org:'Consortium of NLUs', level:'National', category:'Law', mode:'Offline', state:'', fee:4000, appStart:'2025-07-01', appEnd:'2025-10-10', examDate:'2025-12-07', status:'Upcoming', tags:['NLUs','UG/PG']},
      {id:'UPSC-CSE-2026', name:'UPSC Civil Services (Prelims)', org:'UPSC', level:'National', category:'Government', mode:'Offline', state:'', fee:100, appStart:'2026-02-01', appEnd:'2026-02-21', examDate:'2026-05-24', status:'Upcoming', tags:['IAS','IPS','IFS']},
      {id:'AIIMS-NURS-2026', name:'AIIMS B.Sc Nursing', org:'AIIMS', level:'National', category:'Medical', mode:'Online', state:'', fee:1500, appStart:'2026-02-10', appEnd:'2026-03-05', examDate:'2026-06-09', status:'Upcoming', tags:['Nursing','UG']},
      {id:'TANCET-2026', name:'TANCET', org:'Anna University', level:'State', category:'Management', mode:'Offline', state:'Tamil Nadu', fee:800, appStart:'2026-01-10', appEnd:'2026-02-10', examDate:'2026-03-15', status:'Upcoming', tags:['MBA','MCA']},
      {id:'KARN-PSC-2025', name:'Karnataka PSC Group B', org:'KPSC', level:'State', category:'Government', mode:'Offline', state:'Karnataka', fee:600, appStart:'2025-09-10', appEnd:'2025-10-05', examDate:'2025-12-28', status:'Open', tags:['Group B','State Service']},
      {id:'DU-UG-2026', name:'DU UG Entrance', org:'University of Delhi', level:'University', category:'Science', mode:'Online', state:'Delhi', fee:750, appStart:'2026-03-01', appEnd:'2026-03-31', examDate:'2026-05-20', status:'Upcoming', tags:['UG','Science Streams']}
    ];

    // ---------- UTILITIES ----------
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    const fmt = d => new Date(d).toLocaleDateString(undefined, { year:'numeric', month:'short', day:'numeric' });
    const inRange = (date, from, to) => {
      const x = new Date(date).getTime();
      if (from && x < new Date(from).getTime()) return false;
      if (to && x > new Date(to).getTime()) return false;
      return true;
    };
    const monthKey = d => { const dt = new Date(d); return `${dt.getFullYear()}-${String(dt.getMonth()+1).padStart(2,'0')}`; };

    // Populate month filter
    const months = [...new Set(exams.map(e => monthKey(e.examDate)))].sort();
    const monthSel = $('#monthFilter');
    months.forEach(m => {
      const [y,mm] = m.split('-');
      const label = new Date(`${y}-${mm}-01`).toLocaleDateString(undefined,{month:'long', year:'numeric'});
      const opt = document.createElement('option'); opt.value = m; opt.textContent = label; monthSel.appendChild(opt);
    });

    // ---------- RENDERERS (no pagination) ----------
    let saved = new Set(JSON.parse(localStorage.getItem('savedExams')||'[]'));

    function render(examList){
      $('#resultsCount').textContent = examList.length;

      // List view
      const list = $('#listView'); list.innerHTML = '';
      examList.forEach(e => list.appendChild(tpl('tplRow', e)));

      // Card view
      const cards = $('#cardView'); cards.innerHTML = '';
      examList.forEach(e => cards.appendChild(tpl('tplCard', e)));

      // Upcoming sidebar
      renderUpcoming(exams
        .filter(e => new Date(e.examDate) >= new Date())
        .sort((a,b)=>new Date(a.examDate)-new Date(b.examDate))
        .slice(0,5));
    }

    function renderUpcoming(list){
      const box = $('#upcomingList'); box.innerHTML = '';
      list.forEach(e=>{
        const t = document.getElementById('tplUpcoming').content.cloneNode(true);
        t.querySelector('p.font-medium').textContent = e.name;
        t.querySelector('.badge').textContent = e.category;
        t.querySelector('p.text-xs').textContent = `Exam: ${fmt(e.examDate)} • Apply: ${fmt(e.appStart)} → ${fmt(e.appEnd)}`;
        box.appendChild(t);
      });
    }

    function tpl(id, e){
      const t = document.getElementById(id).content.cloneNode(true);
      t.querySelector('h3').textContent = e.name;
      const badges = t.querySelectorAll('.badge');
      if (badges[0]) badges[0].textContent = `${e.level} • ${e.mode}`;
      if (badges[1]) badges[1].textContent = e.category;
      const org = t.querySelector('p.text-xs, p.text-sm'); if (org) org.textContent = e.org || '';
      const boxes = t.querySelectorAll('.grid .font-medium');
      if (boxes[0]) boxes[0].textContent = `${fmt(e.appStart)} → ${fmt(e.appEnd)} (${e.status})`;
      if (boxes[1]) boxes[1].textContent = fmt(e.examDate);
      if (boxes[2]) boxes[2].textContent = e.fee ? `₹${e.fee.toLocaleString()}` : '—';

      const tagWrap = t.querySelector('.mt-3.flex');
      e.tags?.forEach(tag=>{
        const s = document.createElement('span'); s.className = 'badge bg-ink-100 text-ink-700'; s.textContent = tag; tagWrap?.appendChild(s);
      });

      const saveBtn = t.querySelector('.saveBtn');
      if (saveBtn){
        saveBtn.textContent = (saved.has(e.id) ? '✅ Saved' : '⭐ Save');
        saveBtn.onclick = ()=>{ if (saved.has(e.id)) saved.delete(e.id); else saved.add(e.id); localStorage.setItem('savedExams', JSON.stringify([...saved])); saveBtn.textContent = (saved.has(e.id) ? '✅ Saved' : '⭐ Save'); };
      }
      const icsBtn = t.querySelector('.icsBtn'); if (icsBtn) icsBtn.onclick = ()=>downloadICS(e);
      return t;
    }

    function downloadICS(e){
      const dtStart = new Date(e.examDate);
      const dtEnd = new Date(dtStart.getTime()+3*60*60*1000);
      const f = d => d.toISOString().replace(/[-:]/g,'').split('.')[0] + 'Z';
      const ics = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//NxtTurn//Exam Calendar//EN
BEGIN:VEVENT
UID:${e.id}@nxtturn
DTSTAMP:${f(new Date())}
DTSTART:${f(dtStart)}
DTEND:${f(dtEnd)}
SUMMARY:${e.name}
DESCRIPTION:${e.org||''}\\nApplication: ${fmt(e.appStart)} → ${fmt(e.appEnd)}\\nMode: ${e.mode}\\nLevel: ${e.level}
END:VEVENT
END:VCALENDAR`;
      const blob = new Blob([ics], {type:'text/calendar;charset=utf-8'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `${e.id}.ics`; document.body.appendChild(a); a.click(); a.remove();
    }

    // ---------- FILTERING ----------
    function currentFilters(){
      return {
        q: $('#q').value.trim().toLowerCase(),
        levels: $$('.level:checked').map(x=>x.value),
        cats: $$('.cat:checked').map(x=>x.value),
        modes: $$('.mode:checked').map(x=>x.value),
        state: $('#state').value,
        status: $$('.status:checked').map(x=>x.value),
        feeMax: parseInt($('#feeMax').value || '0',10),
        dateFrom: $('#dateFrom').value,
        dateTo: $('#dateTo').value,
        month: $('#monthFilter').value,
        sortBy: $('#sortBy').value
      };
    }

    function apply(){
      const f = currentFilters();
      let out = exams.filter(e=>{
        if (f.q && !(e.name.toLowerCase().includes(f.q) || (e.org||'').toLowerCase().includes(f.q))) return false;
        if (f.levels.length && !f.levels.includes(e.level)) return false;
        if (f.cats.length && !f.cats.includes(e.category)) return false;
        if (f.modes.length && !f.modes.includes(e.mode)) return false;
        if (f.state && e.state !== f.state) return false;
        if (f.status.length && !f.status.includes(e.status)) return false;
        if (f.feeMax && (e.fee||0) > f.feeMax) return false;
        if (!inRange(e.examDate, f.dateFrom, f.dateTo)) return false;
        if (f.month && monthKey(e.examDate) !== f.month) return false;
        return true;
      });

      switch (f.sortBy){
        case 'dateAsc': out.sort((a,b)=>new Date(a.examDate)-new Date(b.examDate)); break;
        case 'dateDesc': out.sort((a,b)=>new Date(b.examDate)-new Date(a.examDate)); break;
        case 'feeAsc': out.sort((a,b)=>(a.fee||0)-(b.fee||0)); break;
        case 'feeDesc': out.sort((a,b)=>(b.fee||0)-(a.fee||0)); break;
      }

      render(out);
      window._currentList = out;
    }

    // ---------- EVENTS ----------
    document.getElementById('applyFilters').addEventListener('click', apply);
    document.getElementById('resetFilters').addEventListener('click', ()=>{
      ['.level','.cat','.mode','.status'].forEach(sel => $$(sel).forEach(cb=>cb.checked=false));
      document.getElementById('q').value = ''; document.getElementById('state').value = ''; document.getElementById('feeMax').value = '';
      document.getElementById('dateFrom').value = ''; document.getElementById('dateTo').value = '';
      document.getElementById('sortBy').value = 'dateAsc'; document.getElementById('monthFilter').value = '';
      apply();
    });
    document.getElementById('clearFilters').addEventListener('click', ()=>document.getElementById('resetFilters').click());

    document.getElementById('viewList').addEventListener('click', ()=>{
      document.getElementById('listView').classList.remove('hidden');
      document.getElementById('cardView').classList.add('hidden');
    });
    document.getElementById('viewCards').addEventListener('click', ()=>{
      document.getElementById('cardView').classList.remove('hidden');
      document.getElementById('listView').classList.add('hidden');
    });

    // Initial render
    apply();
  </script>
</body>
</html>
